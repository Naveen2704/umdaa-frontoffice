<ion-content>
  <ion-header>
    <ion-toolbar>
      <ion-title>
        <i class="fas fa-shopping-cart"></i> Orders
      </ion-title>
      <button slot="end" mat-raised-button color="primary" class="me-3" routerLink="/newOrder">New Order</button>
    </ion-toolbar>
  </ion-header>

  <div class="container-fluid my-3">
    <div class="row">
      <div class="col-md-12">
        <table mat-table [dataSource]="ordersData" class="w-100 border" *ngIf="ordersData.length > 0">
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef>#</th>
              <td mat-cell *matCellDef="let row">{{ row.id }}</td>
            </ng-container>
  
            <ng-container matColumnDef="invInfo">
              <th mat-header-cell *matHeaderCellDef>Invoice Info</th>
              <td mat-cell *matCellDef="let row">
                <p class="font-weight-bold mb-1">{{ row.invoice_no }}</p>
                <p class="m-0">{{ row.invoice_date }}</p>
              </td>
            </ng-container>
  
            <ng-container matColumnDef="customerInfo">
              <th mat-header-cell *matHeaderCellDef>Customer Info</th>
              <td mat-cell *matCellDef="let row">
                <p class="font-weight-bold mb-1">{{ row.customer_name }}</p>
                <p class="m-0">{{ row.mobile }}</p>
              </td>
            </ng-container>
  
            <ng-container matColumnDef="cost">
              <th mat-header-cell *matHeaderCellDef>Cost</th>
              <td mat-cell *matCellDef="let row">
                <p class="font-weight-bold mb-1">{{ row.cost }}</p>
              </td>
            </ng-container>
  
            <ng-container matColumnDef="discount">
              <th mat-header-cell *matHeaderCellDef>Discount</th>
              <td mat-cell *matCellDef="let row">
                <p class="font-weight-bold mb-1">{{ row.discount }}</p>
              </td>
            </ng-container>
  
            <ng-container matColumnDef="amount_paid">
              <th mat-header-cell *matHeaderCellDef>Amount</th>
              <td mat-cell *matCellDef="let row">
                <p class="font-weight-bold mb-1">{{ row.amount }}</p>
              </td>
            </ng-container>
  
            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef>Status</th>
              <td mat-cell *matCellDef="let row">
                <p class="font-weight-bold mb-1">{{ row.status }} through {{ row.payment_mode }}</p>
              </td>
            </ng-container>
  
            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef>Actions</th>
              <td mat-cell *matCellDef="let row">
                <button mat-button color="primary" (click)="viewInvoice(row.billing_id)">View Invoice</button>
              </td>
            </ng-container>
  
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
        
        <div class="text-center" *ngIf="ordersData.length === 0">
          <h3>No Orders Found</h3>
        </div>
      </div>
    </div>
  </div>

</ion-content>